/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/photo-sphere-viewer@4.6.1/dist/plugins/stereo.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/*!
* Photo Sphere Viewer 4.6.1
* @copyright 2014-2015 Jérémy Heleine
* @copyright 2015-2022 Damien "Mistic" Sorel
* @licence MIT (https://opensource.org/licenses/MIT)
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("photo-sphere-viewer"),require("three")):"function"==typeof define&&define.amd?define(["exports","photo-sphere-viewer","three"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).PhotoSphereViewer=e.PhotoSphereViewer||{},e.PhotoSphereViewer.StereoPlugin={}),e.PhotoSphereViewer,e.THREE)}(this,(function(e,t,o){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}var i={STEREO_UPDATED:"stereo-updated"},s="pleaseRotate",p=function(e){function t(t){var o;return(o=e.call(this,t,"psv-button--hover-scale psv-stereo-button",!0)||this).plugin=o.psv.getPlugin("stereo"),o.plugin&&o.plugin.on(i.STEREO_UPDATED,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o)),o}r(t,e);var o=t.prototype;return o.destroy=function(){this.plugin&&this.plugin.off(i.STEREO_UPDATED,this),delete this.plugin,e.prototype.destroy.call(this)},o.isSupported=function(){return!!this.plugin&&{initial:!1,promise:this.plugin.prop.isSupported}},o.handleEvent=function(e){e.type===i.STEREO_UPDATED&&this.toggleActive(e.args[0])},o.onClick=function(){this.plugin.toggle()},t}(t.AbstractButton);p.id="stereo",p.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -2 16 16"><path fill="currentColor" d="M13.104 0H2.896C2.332 0 1 .392 1 .875h14C15 .392 13.668 0 13.104 0zM15 1H1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3.534a2 2 0 0 0 1.821-1.172l1.19-2.618a.5.5 0 0 1 .91 0l1.19 2.618A2 2 0 0 0 11.466 11H15a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM4 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm8 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/>\x3c!--Created by Idevã Batista from the Noun Project--\x3e</svg>\n';var a=function(e){var t=new o.StereoCamera;t.aspect=.5;var r=new o.Vector2;this.setEyeSeparation=function(e){t.eyeSep=e},this.setSize=function(t,o){e.setSize(t,o)},this.render=function(o,n){o.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),t.update(n),e.getSize(r),e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,r.width/2,r.height),e.setViewport(0,0,r.width/2,r.height),e.render(o,t.cameraL),e.setScissor(r.width/2,0,r.width/2,r.height),e.setViewport(r.width/2,0,r.width/2,r.height),e.render(o,t.cameraR),e.setScissorTest(!1)}};t.DEFAULTS.lang[p.id]="Stereo view",t.registerButton(p,"caption:right"),t.DEFAULTS.lang.stereoNotification="Click anywhere to exit stereo view.",t.DEFAULTS.lang.pleaseRotate=["Please rotate your device","(or tap to continue)"];var l=function(e){function o(t){var o;return(o=e.call(this,t)||this).gyroscope=null,o.markers=null,o.prop={isSupported:!1,renderer:null,noSleep:null,wakeLock:null},o}r(o,e);var n=o.prototype;return n.init=function(){if(e.prototype.init.call(this),this.markers=this.psv.getPlugin("markers"),this.gyroscope=this.psv.getPlugin("gyroscope"),!this.gyroscope)throw new t.PSVError("Stereo plugin requires the Gyroscope plugin");this.prop.isSupported=this.gyroscope.prop.isSupported,this.psv.on(t.CONSTANTS.EVENTS.STOP_ALL,this),this.psv.on(t.CONSTANTS.EVENTS.CLICK,this)},n.destroy=function(){this.psv.off(t.CONSTANTS.EVENTS.STOP_ALL,this),this.psv.off(t.CONSTANTS.EVENTS.CLICK,this),this.stop(),e.prototype.destroy.call(this)},n.handleEvent=function(e){switch(e.type){case t.CONSTANTS.EVENTS.STOP_ALL:case t.CONSTANTS.EVENTS.CLICK:this.stop()}},n.isEnabled=function(){return!!this.prop.renderer},n.start=function(){var e=this;return this.psv.enterFullscreen(),this.__startNoSleep(),this.__lockOrientation(),this.gyroscope.start().then((function(){var t;e.prop.renderer=e.psv.renderer.renderer,e.psv.renderer.renderer=new a(e.psv.renderer.renderer),e.psv.needsUpdate(),null==(t=e.markers)||t.hide(),e.psv.navbar.hide(),e.psv.panel.hide(),e.trigger(i.STEREO_UPDATED,!0),e.psv.notification.show({content:e.psv.config.lang.stereoNotification,timeout:3e3})}),(function(){e.__unlockOrientation(),e.__stopNoSleep(),e.psv.exitFullscreen()}))},n.stop=function(){var e;this.isEnabled()&&(this.psv.renderer.renderer=this.prop.renderer,this.prop.renderer=null,this.psv.needsUpdate(),null==(e=this.markers)||e.show(),this.psv.navbar.show(),this.__unlockOrientation(),this.__stopNoSleep(),this.psv.exitFullscreen(),this.gyroscope.stop(),this.trigger(i.STEREO_UPDATED,!1))},n.toggle=function(){this.isEnabled()?this.stop():this.start()},n.__startNoSleep=function(){var e=this;"wakeLock"in navigator?navigator.wakeLock.request("screen").then((function(t){e.prop.wakeLock=t})).catch((function(){return t.utils.logWarn("Cannot acquire WakeLock")})):"NoSleep"in window?(this.prop.noSleep||(this.prop.noSleep=new window.NoSleep),this.prop.noSleep.enable()):t.utils.logWarn("NoSleep is not available")},n.__stopNoSleep=function(){this.prop.wakeLock?(this.prop.wakeLock.release(),this.prop.wakeLock=null):this.prop.noSleep&&this.prop.noSleep.disable()},n.__lockOrientation=function(){var e,t,o=this,r=function(){window.innerHeight>window.innerWidth&&o.psv.overlay.show({id:s,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66.7 19a14 14 0 0 1 13.8 12.1l-3.9-2.7c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l5.7 3.9.6.2c.3 0 .6-.2.8-.4l3.9-5.7c.3-.5.2-1.1-.3-1.4-.5-.3-1.1-.2-1.4.3l-2.4 3.5A16 16 0 0 0 66.7 17c-.6 0-1 .4-1 1s.4 1 1 1zM25 15h10c.6 0 1-.4 1-1s-.4-1-1-1H25c-.6 0-1 .4-1 1s.4 1 1 1zm-6.9 30H16l-2 .2a1 1 0 0 0-.8 1.2c.1.5.5.8 1 .8h.2l1.7-.2h2.1c.6 0 1-.4 1-1s-.5-1-1.1-1zm10 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zM84 45H55V16A11 11 0 0 0 44 5H16A11 11 0 0 0 5 16v68a11 11 0 0 0 11 11h68a11 11 0 0 0 11-11V56a11 11 0 0 0-11-11zM16 93c-5 0-9-4-9-9V53.2c.3-.1.6-.3.7-.6a9.8 9.8 0 0 1 2-3c.4-.4.4-1 0-1.4a1 1 0 0 0-1.4 0l-1.2 1.5V16c0-5 4-9 9-9h28c5 0 9 4 9 9v68c0 5-4 9-9 9H16zm77-9c0 5-4 9-9 9H50.3c2.8-2 4.7-5.3 4.7-9V47h29c5 0 9 4 9 9v28zM38.1 45h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.5-1-1-1zm9.9 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zm38 19c-.6 0-1 .4-1 1v10c0 .6.4 1 1 1s1-.4 1-1V65c0-.6-.4-1-1-1z"/>\x3c!--Created by Anthony Bresset from the Noun Project--\x3e</svg>\n',text:o.psv.config.lang.pleaseRotate[0],subtext:o.psv.config.lang.pleaseRotate[1]}),t&&(clearTimeout(t),t=null)};null!=(e=window.screen)&&e.orientation?(window.screen.orientation.lock("landscape").then(null,(function(){return r()})),t=setTimeout((function(){return r()}),500)):r()},n.__unlockOrientation=function(){var e;null!=(e=window.screen)&&e.orientation?window.screen.orientation.unlock():this.psv.overlay.hide(s)},o}(t.AbstractPlugin);l.id="stereo",l.EVENTS=i,e.EVENTS=i,e.StereoPlugin=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/a27e98fdc84db90bc6433f65e99ef4bd361058eb950f8c59d69b7f5d473ef295.map