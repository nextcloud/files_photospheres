/*! For license information please see fileAction.js.LICENSE.txt */
(()=>{var e={696:e=>{"use strict";var t=/["'&<>]/;e.exports=function(e){var r,n=""+e,i=t.exec(n);if(!i)return n;var o="",s=0,a=0;for(s=i.index;s<n.length;s++){switch(n.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=n.substring(a,s)),a=s+1,o+=r}return a!==s?o+n.substring(a,s):o}},538:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,l=[],c=!1,h=-1;function u(){c&&a&&(c=!1,a.length?l=a.concat(l):h=-1,l.length&&p())}function p(){if(!c){var e=s(u);c=!0;for(var t=l.length;t;){for(a=l,l=[];++h<t;)a&&a[h].run();h=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function E(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new E(e,t)),1!==l.length||c||s(p)},E.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},944:(e,t,r)=>{"use strict";const n=r(796),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(630),{safeRe:s,t:a}=r(850),l=r(95),{compareIdentifiers:c}=r(31);class h{constructor(e,t){if(t=l(t),e instanceof h){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof h)){if("string"==typeof e&&e===this.version)return 0;e=new h(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof h||(e=new h(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return c(r,i)}while(++t)}compareBuild(e){e instanceof h||(e=new h(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return c(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?s[a.PRERELEASELOOSE]:s[a.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=h},966:(e,t,r)=>{"use strict";const n=r(944);e.exports=(e,t)=>new n(e,t).major},860:(e,t,r)=>{"use strict";const n=r(944);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},645:(e,t,r)=>{"use strict";const n=r(860);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},630:e=>{"use strict";const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},796:(e,t,r)=>{"use strict";var n=r(538);const i="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=i},31:e=>{"use strict";const t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},95:e=>{"use strict";const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},850:(e,t,r)=>{"use strict";const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(630),s=r(796),a=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],h=t.safeSrc=[],u=t.t={};let p=0;const E="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",o],[E,i]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of d)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=p++;s(e,i,t),u[e]=i,c[i]=t,h[i]=n,a[i]=new RegExp(t,r?"g":void 0),l[i]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),f("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${E}+`),f("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),f("FULL",`^${c[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),f("LOOSE",`^${c[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),f("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?`+`(?:${c[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",c[u.COERCE],!0),f("COERCERTLFULL",c[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(()=>{"use strict";var e=r(966),t=r(645);class n{bus;constructor(r){"function"==typeof r.getVersion&&t(r.getVersion())?e(r.getVersion())!==e(this.getVersion())&&console.warn("Proxying an event bus of version "+r.getVersion()+" with "+this.getVersion()):console.warn("Proxying an event bus with an unknown or invalid version"),this.bus=r}getVersion(){return"3.3.3"}subscribe(e,t){this.bus.subscribe(e,t)}unsubscribe(e,t){this.bus.unsubscribe(e,t)}emit(e,...t){this.bus.emit(e,...t)}}class i{handlers=new Map;getVersion(){return"3.3.3"}subscribe(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).concat(t))}unsubscribe(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).filter((e=>e!==t)))}emit(e,...t){(this.handlers.get(e)||[]).forEach((e=>{try{e(t[0])}catch(e){console.error("could not invoke event listener",e)}}))}}let o,s=null;class a{static GLOBAL_SCOPE_VOLATILE="nextcloud_vol";static GLOBAL_SCOPE_PERSISTENT="nextcloud_per";scope;wrapped;constructor(e,t,r){this.scope=`${r?a.GLOBAL_SCOPE_PERSISTENT:a.GLOBAL_SCOPE_VOLATILE}_${btoa(e)}_`,this.wrapped=t}scopeKey(e){return`${this.scope}${e}`}setItem(e,t){this.wrapped.setItem(this.scopeKey(e),t)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter((e=>e.startsWith(this.scope))).map(this.wrapped.removeItem.bind(this.wrapped))}}const l=[];var c;let h;function u(e,t){return e?e.getAttribute(t):null}c=e=>{o=e.token,l.forEach((e=>{try{e(o)}catch(e){console.error("Error updating CSRF token observer",e)}}))},(null!==s?s:"undefined"==typeof window?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&void 0===window._nc_event_bus&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),s=void 0!==window?._nc_event_bus?new n(window._nc_event_bus):window._nc_event_bus=new i,s)).subscribe("csrf-token-update",c),("public",new class{appId;persisted=!1;clearedOnLogout=!1;constructor(e){this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new a(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}("public")).persist().build();var p=(e=>(e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Fatal=4]="Fatal",e))(p||{});class E{context;constructor(e){this.context=e||{}}formatMessage(e,t,r){let n="["+p[t].toUpperCase()+"] ";return r&&r.app&&(n+=r.app+": "),"string"==typeof e?n+e:(n+=`Unexpected ${e.name}`,e.message&&(n+=` "${e.message}"`),t===p.Debug&&e.stack&&(n+=`\n\nStack trace:\n${e.stack}`),n)}log(e,t,r){if(!("number"==typeof this.context?.level&&e<this.context?.level))switch("object"==typeof t&&void 0===r?.error&&(r.error=t),e){case p.Debug:console.debug(this.formatMessage(t,p.Debug,r),r);break;case p.Info:console.info(this.formatMessage(t,p.Info,r),r);break;case p.Warn:console.warn(this.formatMessage(t,p.Warn,r),r);break;case p.Error:console.error(this.formatMessage(t,p.Error,r),r);break;case p.Fatal:default:console.error(this.formatMessage(t,p.Fatal,r),r)}}debug(e,t){this.log(p.Debug,e,Object.assign({},this.context,t))}info(e,t){this.log(p.Info,e,Object.assign({},this.context,t))}warn(e,t){this.log(p.Warn,e,Object.assign({},this.context,t))}error(e,t){this.log(p.Error,e,Object.assign({},this.context,t))}fatal(e,t){this.log(p.Fatal,e,Object.assign({},this.context,t))}}function d(e){return new E(e)}class f{context;factory;constructor(e){this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=function(){if(void 0!==h)return h;const e=document?.getElementsByTagName("head")[0];if(!e)return null;const t=u(e,"data-user");return null===t?(h=null,h):(h={uid:t,displayName:u(e,"data-user-displayname"),isAdmin:!!window._oc_isadmin},h)}();return null!==e&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,t=()=>{"complete"===document.readyState||"interactive"===document.readyState?(e.context.level=window._oc_config?.loglevel??p.Warn,window._oc_debug&&(e.context.level=p.Debug),document.removeEventListener("readystatechange",t)):document.addEventListener("readystatechange",t)};return t(),this}build(){return void 0===this.context.level&&this.detectLogLevel(),this.factory(this.context)}}const m=new f(d).setApp("@nextcloud/files").detectUser().build();var g=(e=>(e[e.NONE=0]="NONE",e[e.CREATE=4]="CREATE",e[e.READ=1]="READ",e[e.UPDATE=2]="UPDATE",e[e.DELETE=8]="DELETE",e[e.SHARE=16]="SHARE",e[e.ALL=31]="ALL",e))(g||{});EventTarget;const{entries:I,setPrototypeOf:R,isFrozen:L,getPrototypeOf:N,getOwnPropertyDescriptor:A}=Object;let{freeze:w,seal:T,create:_}=Object,{apply:S,construct:O}="undefined"!=typeof Reflect&&Reflect;w||(w=function(e){return e}),T||(T=function(e){return e}),S||(S=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.apply(t,n)}),O||(O=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new e(...r)});const v=V(Array.prototype.forEach),y=V(Array.prototype.lastIndexOf),b=V(Array.prototype.pop),D=V(Array.prototype.push),C=V(Array.prototype.splice),F=V(String.prototype.toLowerCase),P=V(String.prototype.toString),M=V(String.prototype.match),x=V(String.prototype.replace),k=V(String.prototype.indexOf),U=V(String.prototype.trim),G=V(Object.prototype.hasOwnProperty),H=V(RegExp.prototype.test),j=(X=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(X,t)});var X;function V(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return S(e,t,n)}}function B(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;R&&R(e,null);let n=t.length;for(;n--;){let i=t[n];if("string"==typeof i){const e=r(i);e!==i&&(L(t)||(t[n]=e),i=e)}e[i]=!0}return e}function z(e){for(let t=0;t<e.length;t++)G(e,t)||(e[t]=null);return e}function W(e){const t=_(null);for(const[r,n]of I(e))G(e,r)&&(Array.isArray(n)?t[r]=z(n):n&&"object"==typeof n&&n.constructor===Object?t[r]=W(n):t[r]=n);return t}function Y(e,t){for(;null!==e;){const r=A(e,t);if(r){if(r.get)return V(r.get);if("function"==typeof r.value)return V(r.value)}e=N(e)}return function(){return null}}const q=w(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),K=w(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Z=w(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Q=w(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),J=w(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ee=w(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),te=w(["#text"]),re=w(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ne=w(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ie=w(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oe=w(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),se=T(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ae=T(/<%[\w\W]*|[\w\W]*%>/gm),le=T(/\$\{[\w\W]*/gm),ce=T(/^data-[\-\w.\u00B7-\uFFFF]+$/),he=T(/^aria-[\-\w]+$/),ue=T(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pe=T(/^(?:\w+script|data):/i),Ee=T(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),de=T(/^html$/i),fe=T(/^[a-z][.\w]*(-[.\w]+)+$/i);var me=Object.freeze({__proto__:null,ARIA_ATTR:he,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:fe,DATA_ATTR:ce,DOCTYPE_NAME:de,ERB_EXPR:ae,IS_ALLOWED_URI:ue,IS_SCRIPT_OR_DATA:pe,MUSTACHE_EXPR:se,TMPLIT_EXPR:le});const ge=function(){return"undefined"==typeof window?null:window};(function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge();const r=t=>e(t);if(r.version="3.3.1",r.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return r.isSupported=!1,r;let{document:n}=t;const i=n,o=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:h,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:E,trustedTypes:d}=t,f=c.prototype,m=Y(f,"cloneNode"),g=Y(f,"remove"),R=Y(f,"nextSibling"),L=Y(f,"childNodes"),N=Y(f,"parentNode");if("function"==typeof a){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let A,T="";const{implementation:S,createNodeIterator:O,createDocumentFragment:$,getElementsByTagName:X}=n,{importNode:V}=i;let z={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported="function"==typeof I&&"function"==typeof N&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:se,ERB_EXPR:ae,TMPLIT_EXPR:le,DATA_ATTR:ce,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:fe}=me;let{IS_ALLOWED_URI:Ie}=me,Re=null;const Le=B({},[...q,...K,...Z,...J,...te]);let Ne=null;const Ae=B({},[...re,...ne,...ie,...oe]);let we=Object.seal(_(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,_e=null;const Se=Object.seal(_(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Oe=!0,ve=!0,ye=!1,be=!0,De=!1,Ce=!0,$e=!1,Fe=!1,Pe=!1,Me=!1,xe=!1,ke=!1,Ue=!0,Ge=!1,He=!0,je=!1,Xe={},Ve=null;const Be=B({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const We=B({},["audio","video","img","source","image","track"]);let Ye=null;const qe=B({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let Je=Qe,et=!1,tt=null;const rt=B({},[Ke,Ze,Qe],P);let nt=B({},["mi","mo","mn","ms","mtext"]),it=B({},["annotation-xml"]);const ot=B({},["title","style","font","a","script"]);let st=null;const at=["application/xhtml+xml","text/html"];let lt=null,ct=null;const ht=n.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},pt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ct||ct!==e){if(e&&"object"==typeof e||(e={}),e=W(e),st=-1===at.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,lt="application/xhtml+xml"===st?P:F,Re=G(e,"ALLOWED_TAGS")?B({},e.ALLOWED_TAGS,lt):Le,Ne=G(e,"ALLOWED_ATTR")?B({},e.ALLOWED_ATTR,lt):Ae,tt=G(e,"ALLOWED_NAMESPACES")?B({},e.ALLOWED_NAMESPACES,P):rt,Ye=G(e,"ADD_URI_SAFE_ATTR")?B(W(qe),e.ADD_URI_SAFE_ATTR,lt):qe,ze=G(e,"ADD_DATA_URI_TAGS")?B(W(We),e.ADD_DATA_URI_TAGS,lt):We,Ve=G(e,"FORBID_CONTENTS")?B({},e.FORBID_CONTENTS,lt):Be,Te=G(e,"FORBID_TAGS")?B({},e.FORBID_TAGS,lt):W({}),_e=G(e,"FORBID_ATTR")?B({},e.FORBID_ATTR,lt):W({}),Xe=!!G(e,"USE_PROFILES")&&e.USE_PROFILES,Oe=!1!==e.ALLOW_ARIA_ATTR,ve=!1!==e.ALLOW_DATA_ATTR,ye=e.ALLOW_UNKNOWN_PROTOCOLS||!1,be=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,De=e.SAFE_FOR_TEMPLATES||!1,Ce=!1!==e.SAFE_FOR_XML,$e=e.WHOLE_DOCUMENT||!1,Me=e.RETURN_DOM||!1,xe=e.RETURN_DOM_FRAGMENT||!1,ke=e.RETURN_TRUSTED_TYPE||!1,Pe=e.FORCE_BODY||!1,Ue=!1!==e.SANITIZE_DOM,Ge=e.SANITIZE_NAMED_PROPS||!1,He=!1!==e.KEEP_CONTENT,je=e.IN_PLACE||!1,Ie=e.ALLOWED_URI_REGEXP||ue,Je=e.NAMESPACE||Qe,nt=e.MATHML_TEXT_INTEGRATION_POINTS||nt,it=e.HTML_INTEGRATION_POINTS||it,we=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(we.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(we.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(we.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(ve=!1),xe&&(Me=!0),Xe&&(Re=B({},te),Ne=[],!0===Xe.html&&(B(Re,q),B(Ne,re)),!0===Xe.svg&&(B(Re,K),B(Ne,ne),B(Ne,oe)),!0===Xe.svgFilters&&(B(Re,Z),B(Ne,ne),B(Ne,oe)),!0===Xe.mathMl&&(B(Re,J),B(Ne,ie),B(Ne,oe))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?Se.tagCheck=e.ADD_TAGS:(Re===Le&&(Re=W(Re)),B(Re,e.ADD_TAGS,lt))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?Se.attributeCheck=e.ADD_ATTR:(Ne===Ae&&(Ne=W(Ne)),B(Ne,e.ADD_ATTR,lt))),e.ADD_URI_SAFE_ATTR&&B(Ye,e.ADD_URI_SAFE_ATTR,lt),e.FORBID_CONTENTS&&(Ve===Be&&(Ve=W(Ve)),B(Ve,e.FORBID_CONTENTS,lt)),e.ADD_FORBID_CONTENTS&&(Ve===Be&&(Ve=W(Ve)),B(Ve,e.ADD_FORBID_CONTENTS,lt)),He&&(Re["#text"]=!0),$e&&B(Re,["html","head","body"]),Re.table&&(B(Re,["tbody"]),delete Te.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw j('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw j('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,T=A.createHTML("")}else void 0===A&&(A=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(d,o)),null!==A&&"string"==typeof T&&(T=A.createHTML(""));w&&w(e),ct=e}},Et=B({},[...K,...Z,...Q]),dt=B({},[...J,...ee]),ft=function(e){D(r.removed,{element:e});try{N(e).removeChild(e)}catch(t){g(e)}},mt=function(e,t){try{D(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){D(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Me||xe)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},gt=function(e){let t=null,r=null;if(Pe)e="<remove></remove>"+e;else{const t=M(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===st&&Je===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=A?A.createHTML(e):e;if(Je===Qe)try{t=(new E).parseFromString(i,st)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(Je,"template",null);try{t.documentElement.innerHTML=et?T:i}catch(e){}}const o=t.body||t.documentElement;return e&&r&&o.insertBefore(n.createTextNode(r),o.childNodes[0]||null),Je===Qe?X.call(t,$e?"html":"body")[0]:$e?t.documentElement:o},It=function(e){return O.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Rt=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Lt=function(e){return"function"==typeof l&&e instanceof l};function Nt(e,t,n){v(e,(e=>{e.call(r,t,n,ct)}))}const At=function(e){let t=null;if(Nt(z.beforeSanitizeElements,e,null),Rt(e))return ft(e),!0;const n=lt(e.nodeName);if(Nt(z.uponSanitizeElement,e,{tagName:n,allowedTags:Re}),Ce&&e.hasChildNodes()&&!Lt(e.firstElementChild)&&H(/<[/\w!]/g,e.innerHTML)&&H(/<[/\w!]/g,e.textContent))return ft(e),!0;if(7===e.nodeType)return ft(e),!0;if(Ce&&8===e.nodeType&&H(/<[/\w]/g,e.data))return ft(e),!0;if(!(Se.tagCheck instanceof Function&&Se.tagCheck(n))&&(!Re[n]||Te[n])){if(!Te[n]&&Tt(n)){if(we.tagNameCheck instanceof RegExp&&H(we.tagNameCheck,n))return!1;if(we.tagNameCheck instanceof Function&&we.tagNameCheck(n))return!1}if(He&&!Ve[n]){const t=N(e)||e.parentNode,r=L(e)||e.childNodes;if(r&&t)for(let n=r.length-1;n>=0;--n){const i=m(r[n],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,R(e))}}return ft(e),!0}return e instanceof c&&!function(e){let t=N(e);t&&t.tagName||(t={namespaceURI:Je,tagName:"template"});const r=F(e.tagName),n=F(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Ze?t.namespaceURI===Qe?"svg"===r:t.namespaceURI===Ke?"svg"===r&&("annotation-xml"===n||nt[n]):Boolean(Et[r]):e.namespaceURI===Ke?t.namespaceURI===Qe?"math"===r:t.namespaceURI===Ze?"math"===r&&it[n]:Boolean(dt[r]):e.namespaceURI===Qe?!(t.namespaceURI===Ze&&!it[n])&&!(t.namespaceURI===Ke&&!nt[n])&&!dt[r]&&(ot[r]||!Et[r]):!("application/xhtml+xml"!==st||!tt[e.namespaceURI]))}(e)?(ft(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!H(/<\/no(script|embed|frames)/i,e.innerHTML)?(De&&3===e.nodeType&&(t=e.textContent,v([se,ae,le],(e=>{t=x(t,e," ")})),e.textContent!==t&&(D(r.removed,{element:e.cloneNode()}),e.textContent=t)),Nt(z.afterSanitizeElements,e,null),!1):(ft(e),!0)},wt=function(e,t,r){if(Ue&&("id"===t||"name"===t)&&(r in n||r in ht))return!1;if(ve&&!_e[t]&&H(ce,t));else if(Oe&&H(he,t));else if(Se.attributeCheck instanceof Function&&Se.attributeCheck(t,e));else if(!Ne[t]||_e[t]){if(!(Tt(e)&&(we.tagNameCheck instanceof RegExp&&H(we.tagNameCheck,e)||we.tagNameCheck instanceof Function&&we.tagNameCheck(e))&&(we.attributeNameCheck instanceof RegExp&&H(we.attributeNameCheck,t)||we.attributeNameCheck instanceof Function&&we.attributeNameCheck(t,e))||"is"===t&&we.allowCustomizedBuiltInElements&&(we.tagNameCheck instanceof RegExp&&H(we.tagNameCheck,r)||we.tagNameCheck instanceof Function&&we.tagNameCheck(r))))return!1}else if(Ye[t]);else if(H(Ie,x(r,Ee,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(r,"data:")||!ze[e])if(ye&&!H(pe,x(r,Ee,"")));else if(r)return!1;return!0},Tt=function(e){return"annotation-xml"!==e&&M(e,fe)},_t=function(e){Nt(z.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Rt(e))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne,forceKeepAttr:void 0};let i=t.length;for(;i--;){const o=t[i],{name:s,namespaceURI:a,value:l}=o,c=lt(s),h=l;let u="value"===s?h:U(h);if(n.attrName=c,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,Nt(z.uponSanitizeAttribute,e,n),u=n.attrValue,!Ge||"id"!==c&&"name"!==c||(mt(s,e),u="user-content-"+u),Ce&&H(/((--!?|])>)|<\/(style|title|textarea)/i,u)){mt(s,e);continue}if("attributename"===c&&M(u,"href")){mt(s,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){mt(s,e);continue}if(!be&&H(/\/>/i,u)){mt(s,e);continue}De&&v([se,ae,le],(e=>{u=x(u,e," ")}));const p=lt(e.nodeName);if(wt(p,c,u)){if(A&&"object"==typeof d&&"function"==typeof d.getAttributeType)if(a);else switch(d.getAttributeType(p,c)){case"TrustedHTML":u=A.createHTML(u);break;case"TrustedScriptURL":u=A.createScriptURL(u)}if(u!==h)try{a?e.setAttributeNS(a,s,u):e.setAttribute(s,u),Rt(e)?ft(e):b(r.removed)}catch(t){mt(s,e)}}else mt(s,e)}Nt(z.afterSanitizeAttributes,e,null)},St=function e(t){let r=null;const n=It(t);for(Nt(z.beforeSanitizeShadowDOM,t,null);r=n.nextNode();)Nt(z.uponSanitizeShadowNode,r,null),At(r),_t(r),r.content instanceof s&&e(r.content);Nt(z.afterSanitizeShadowDOM,t,null)};return r.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,a=null,c=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Lt(e)){if("function"!=typeof e.toString)throw j("toString is not a function");if("string"!=typeof(e=e.toString()))throw j("dirty is not a string, aborting")}if(!r.isSupported)return e;if(Fe||pt(t),r.removed=[],"string"==typeof e&&(je=!1),je){if(e.nodeName){const t=lt(e.nodeName);if(!Re[t]||Te[t])throw j("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)n=gt("\x3c!----\x3e"),o=n.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!Me&&!De&&!$e&&-1===e.indexOf("<"))return A&&ke?A.createHTML(e):e;if(n=gt(e),!n)return Me?null:ke?T:""}n&&Pe&&ft(n.firstChild);const h=It(je?e:n);for(;a=h.nextNode();)At(a),_t(a),a.content instanceof s&&St(a.content);if(je)return e;if(Me){if(xe)for(c=$.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return(Ne.shadowroot||Ne.shadowrootmode)&&(c=V.call(i,c,!0)),c}let u=$e?n.outerHTML:n.innerHTML;return $e&&Re["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&H(de,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),De&&v([se,ae,le],(e=>{u=x(u,e," ")})),A&&ke?A.createHTML(u):u},r.setConfig=function(){pt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Fe=!0},r.clearConfig=function(){ct=null,Fe=!1},r.isValidAttribute=function(e,t,r){ct||pt({});const n=lt(e),i=lt(t);return wt(n,i,r)},r.addHook=function(e,t){"function"==typeof t&&D(z[e],t)},r.removeHook=function(e,t){if(void 0!==t){const r=y(z[e],t);return-1===r?void 0:C(z[e],r,1)[0]}return b(z[e])},r.removeHooks=function(e){z[e]=[]},r.removeAllHooks=function(){z={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r})(),r(696),globalThis._nc_l10n_locale??="undefined"!=typeof document&&document.documentElement.dataset.locale||Intl.DateTimeFormat().resolvedOptions().locale.replaceAll(/-/g,"_"),globalThis._nc_l10n_language??="undefined"!=typeof document&&document.documentElement.lang||(globalThis.navigator?.language??"en"),globalThis._oc_l10n_registry_translations??={},globalThis._oc_l10n_registry_plural_functions??={};var Ie=r(538),Re=(e=>(e.DEFAULT="default",e.HIDDEN="hidden",e))(Re||{});class Le{_action;constructor(e){this.validateAction(e),this._action=e}get id(){return this._action.id}get displayName(){return this._action.displayName}get title(){return this._action.title}get iconSvgInline(){return this._action.iconSvgInline}get enabled(){return this._action.enabled}get exec(){return this._action.exec}get execBatch(){return this._action.execBatch}get hotkey(){return this._action.hotkey}get order(){return this._action.order}get parent(){return this._action.parent}get default(){return this._action.default}get destructive(){return this._action.destructive}get inline(){return this._action.inline}get renderInline(){return this._action.renderInline}validateAction(e){if(!e.id||"string"!=typeof e.id)throw new Error("Invalid id");if(!e.displayName||"function"!=typeof e.displayName)throw new Error("Invalid displayName function");if("title"in e&&"function"!=typeof e.title)throw new Error("Invalid title function");if(!e.iconSvgInline||"function"!=typeof e.iconSvgInline)throw new Error("Invalid iconSvgInline function");if(!e.exec||"function"!=typeof e.exec)throw new Error("Invalid exec function");if("enabled"in e&&"function"!=typeof e.enabled)throw new Error("Invalid enabled function");if("execBatch"in e&&"function"!=typeof e.execBatch)throw new Error("Invalid execBatch function");if("order"in e&&"number"!=typeof e.order)throw new Error("Invalid order");if(void 0!==e.destructive&&"boolean"!=typeof e.destructive)throw new Error("Invalid destructive flag");if("parent"in e&&"string"!=typeof e.parent)throw new Error("Invalid parent");if(e.default&&!Object.values(Re).includes(e.default))throw new Error("Invalid default");if("inline"in e&&"function"!=typeof e.inline)throw new Error("Invalid inline function");if("renderInline"in e&&"function"!=typeof e.renderInline)throw new Error("Invalid renderInline function");if("hotkey"in e&&void 0!==e.hotkey){if("object"!=typeof e.hotkey)throw new Error("Invalid hotkey configuration");if("string"!=typeof e.hotkey.key||!e.hotkey.key)throw new Error("Missing or invalid hotkey key");if("string"!=typeof e.hotkey.description||!e.hotkey.description)throw new Error("Missing or invalid hotkey description")}}}const Ne=function(e){void 0===window._nc_fileactions&&(window._nc_fileactions=[],m.debug("FileActions initialized")),window._nc_fileactions.find((t=>t.id===e.id))?m.error(`FileAction ${e.id} already registered`,{action:e}):window._nc_fileactions.push(e)};var Ae,we,Te,_e;function Se(){if(we)return Ae;we=1;const e="object"==typeof Ie&&Ie.env&&Ie.env.NODE_DEBUG&&/\bsemver\b/i.test(Ie.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return Ae=e}function Oe(){if(_e)return Te;_e=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return Te={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var ve,ye,be,De,Ce,$e,Fe,Pe,Me,xe,ke,Ue,Ge,He={exports:{}};function je(){if(Fe)return $e;Fe=1;const e=Se(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=Oe(),{safeRe:n,t:i}=(ve||(ve=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=Oe(),o=Se(),s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],h=t.t={};let u=0;const p="[a-zA-Z0-9-]",E=[["\\s",1],["\\d",i],[p,n]],d=(e,t,r)=>{const n=(e=>{for(const[t,r]of E)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=u++;o(e,i,t),h[e]=i,l[i]=t,c[i]=n,s[i]=new RegExp(t,r?"g":void 0),a[i]=new RegExp(n,r?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),d("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${p}+`),d("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),d("FULL",`^${l[h.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),d("LOOSE",`^${l[h.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),d("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),d("COERCE",`${l[h.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",l[h.COERCEPLAIN]+`(?:${l[h.PRERELEASE]})?(?:${l[h.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",l[h.COERCE],!0),d("COERCERTLFULL",l[h.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(He,He.exports)),He.exports),o=function(){if(be)return ye;be=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return ye=r=>r?"object"!=typeof r?e:r:t}(),{compareIdentifiers:s}=function(){if(Ce)return De;Ce=1;const e=/^[0-9]+$/,t=(t,r)=>{if("number"==typeof t&&"number"==typeof r)return t===r?0:t<r?-1:1;const n=e.test(t),i=e.test(r);return n&&i&&(t=+t,r=+r),t===r?0:n&&!i?-1:i&&!n?1:t<r?-1:1};return De={compareIdentifiers:t,rcompareIdentifiers:(e,r)=>t(r,e)}}();class a{constructor(s,l){if(l=o(l),s instanceof a){if(s.loose===!!l.loose&&s.includePrerelease===!!l.includePrerelease)return s;s=s.version}else if("string"!=typeof s)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",s,l),this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease;const c=s.trim().match(l.loose?n[i.LOOSE]:n[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof a)){if("string"==typeof t&&t===this.version)return 0;t=new a(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof a||(e=new a(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(t){if(t instanceof a||(t=new a(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(e("prerelease compare",r,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return s(n,i)}while(++r)}compareBuild(t){t instanceof a||(t=new a(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(e("build compare",r,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return s(n,i)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===s(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return $e=a}!function(){if(Me)return Pe;Me=1;const e=je();Pe=(t,r)=>new e(t,r).major}(),function(){if(Ge)return Ue;Ge=1;const e=function(){if(ke)return xe;ke=1;const e=je();return xe=(t,r,n=!1)=>{if(t instanceof e)return t;try{return new e(t,r)}catch(e){if(!n)return null;throw e}}}();Ue=(t,r)=>{const n=e(t,r);return n?n.version:null}}(),Error,function(e,t,r){var n={_oldActionHandler:null,_frameId:"photo-sphere-viewer-frame",_frameContainer:null,_frameShowing:!1,_photoShpereMimeType:"image/jpeg",_isDirectoryShare:!1,_sharingToken:"",_isSharedSingleFileViewer:!1,_onClose:null,_showImageCalled:!1,_actionHandler:async function({nodes:e,view:t,folder:r}){const n=e[0],i=r.path,o=n.path.replace(/^.*[\\/]/,""),s=this._getDavXmpMeta(n);return this._showImage(n,t,i,o,s),null},_legacyActionHandlerImage:function(e,t){PhotosphereViewerFunctions.showLoader(!0),this.canShow(e,t,function(r,n){if(r)this._showImageLegacy(e,t,n);else if("function"==typeof this._oldActionHandler)PhotosphereViewerFunctions.showLoader(!1),this._oldActionHandler(e,t);else{PhotosphereViewerFunctions.showLoader(!1);const r=this._getFileObject(e,t);window.location=this._getFileUrl(r)}}.bind(this))},_actionHandlerVideo:async function({nodes:e,view:t,folder:r}){const n=e[0],i=n.path.replace(/^.*[\\/]/,""),o=n.encodedSource;return this.showFrame(o,i,null,"video"),null},_getAction:function(){return{id:"photosphereviewer-image",exec:this._actionHandler.bind(this),displayName:e=>"View in PhotoSphereViewer",iconSvgInline:e=>"",order:-1,default:Re.DEFAULT,enabled:({nodes:e})=>{const t=e.every((e=>{const t=this._getDavXmpMeta(e);return!!(e.permissions&g.READ)&&e.mime===this._photoShpereMimeType&&t&&1===t.usePanoramaViewer}));return t&&!PhotosphereViewerFunctions.isWebGl2Supported()?(PhotosphereViewerFunctions.notify("Your browser doesn't support WebGL/WebGL2. Please enable WebGL/WebGL2 support in the browser settings.","error"),!1):t}}},_getVideoAction:function(){return{id:"photosphereviewer-video",exec:this._actionHandlerVideo.bind(this),displayName:e=>"View in 360 viewer",iconSvgInline:e=>"",order:1e3,enabled:({nodes:e})=>e.every((e=>!!(e.permissions&g.READ)&&"video/mp4"===e.mime))}},_getDirectorySharePathFromCurrentLocation:function(){var e=new URLSearchParams(document.location.search).get("path");return e||(e="/"),e},_getFileUrl(e){var r=encodeURIComponent(e.name);if(!this._isDirectoryShare)return"/"==(n=e.path)&&(n=""),`${t.getRootPath()}/remote.php/webdav${n}/${r}`;var n=encodeURIComponent(this._getDirectorySharePathFromCurrentLocation());return`${t.getRootPath()}/index.php/s/${this._sharingToken}/download?path=${n}&files=${r}`},_getDavXmpMeta:function(e){return e.attributes["files-photospheres-xmp-metadata"]},_showImage:function(t,r,n,i,o){if(this._showImageCalled)return;this._showImageCalled=!0;var s=t.encodedSource,a={url:s,filename:i};o&&(a=e.extend(a,o)),this.showFrame(s,i,o,"image");const l=[window.OCP.Files.Router.name,window.OCP.Files.Router.params,window.OCP.Files.Router.query,!0];this._onClose=()=>window.OCP.Files.Router.goToRoute(...l),window.OCP.Files.Router.goToRoute(null,{view:r.id,fileid:t.fileid},{dir:n,openfile:!0},!0)},_showImageLegacy:function(r,n,i){const o=this._getFileObject(r,n);var s=this._getFileUrl(o),a={url:s,filename:r};i&&(a=e.extend(a,i)),this.showFrame(s,r,i,"image");const l=location.search.replace(/^\?/,"");this._onClose=()=>t.Util.History.pushState(l);const c=n.fileInfoModel.get("id"),h=t.Util.History.parseUrlQuery(),u=h.dir;delete h.dir,delete h.fileid,h.openfile=c;const p="dir="+encodePath(u)+"&"+t.buildQueryString(h);t.Util.History.pushState(p)},_listenForCloseMessage:function(e){"closePhotosphereViewer"===e.data&&this._closeAndRemoveListener()},_closeAndRemoveListener:function(){this.hideFrame(),window.removeEventListener("message",this._listenForCloseMessage,!1)},showFrame:function(r,n,i,o){var s,a=this,l="";switch(o){case"image":l=t.generateUrl("apps/files_photospheres"),s={panorama:r,caption:n};break;case"video":l=t.generateUrl("apps/files_photospheres/video"),s={url:r,caption:n}}if("image"==o&&i&&i.containsCroppingConfig){var c={panoData:i.croppingConfig};s=e.extend(s,c)}this._frameContainer=e(`<iframe id="${this._frameId}" src="${l}" allowfullscreen="true"/>`),e("body").after(this._frameContainer);const h="true"===e("#hideDownload").val(),u=a._isSharedSingleFileViewer;this._frameContainer.on("load",(function(){var t=this.contentWindow.window;switch(o){case"image":t.photoSphereViewerRenderer.render(s,h,u);break;case"video":t.photoSphereVideoRenderer.render(s)}t.addEventListener("keyup",a._onKeyUp.bind(a)),e("body").addClass("showing-photo-sphere-viewer-frame"),PhotosphereViewerFunctions.showLoader(!1),a._frameShowing=!0}))},hideFrame:function(){null!=this._frameContainer&&document.contains(this._frameContainer[0])&&(this._frameContainer.detach(),this._frameContainer=null,e("body").removeClass("showing-photo-sphere-viewer-frame"),e("#close-photosphere-viewer").remove(),"function"==typeof this._onClose&&(this._onClose(),this._onClose=null)),this._frameShowing=!1,this._showImageCalled=!1},_getFileObject:function(e,t){for(var r=t.fileList.files,n=0;n<r.length;n++){var i=r[n];if(i.name===e)return i}return null},_xmpDataBackendRequest:function(t,r){e.get(t,(function(e){return e.success?e.data&&"object"==typeof e.data&&e.data.usePanoramaViewer?PhotosphereViewerFunctions.isWebGl2Supported()?void r(!0,e.data):(PhotosphereViewerFunctions.notify("Your browser doesn't support WebGL/WebGL2. Please enable WebGL/WebGL2 support in the browser settings.","error"),void PhotosphereViewerFunctions.showLoader(!1)):void r(!1,null):(e.message?PhotosphereViewerFunctions.notify(["An error occured while trying to read xmp-data: ",e.message]):PhotosphereViewerFunctions.notify("An unknown error occured while trying to read xmp-data."),PhotosphereViewerFunctions.showLoader(!1),void r(!1,null))})).fail((function(e,t,r){PhotosphereViewerFunctions.notify(["An error occured while trying to read xmp-data: ",r]),PhotosphereViewerFunctions.showLoader(!1)}))},_registerLegacyActions:function(){if(!r?.Files?.fileActions)return;const e=r.Files.fileActions.getActions(this._photoShpereMimeType,"file",t.PERMISSION_READ);e&&e.view&&(this._oldActionHandler=e.view.action),r.Files.fileActions.registerAction({name:"view",displayName:"View in PhotoSphereViewer",mime:this._photoShpereMimeType,permissions:t.PERMISSION_READ,actionHandler:this._legacyActionHandlerImage.bind(this)}),r.Files.fileActions.setDefault(this._photoShpereMimeType,"view"),r.Files.fileActions.on("registerAction",function(e){e.action.mime===this._photoShpereMimeType&&e.action.name&&"string"==typeof e.action.name&&"view"===e.action.name.toLowerCase()&&(this._oldActionHandler=e.action.actionHandler,e.action.actionHandler=this._actionHandler.bind(this))}.bind(this))},_onKeyUp:function(e){27==e.keyCode&&this.hideFrame()},init:function(r,n,i){if(this._isDirectoryShare=r,this._sharingToken=n,this._isSharedSingleFileViewer=i,Ne(new Le(this._getAction())),Ne(new Le(this._getVideoAction())),this._registerLegacyActions(),this._isSharedSingleFileViewer)e("footer").addClass("hidden");else{var o=this;window.addEventListener("message",o._listenForCloseMessage.bind(o),!1),window.addEventListener("keyup",o._onKeyUp.bind(o)),t.Util.History.addOnPopStateHandler((function(e){o._frameShowing&&o.hideFrame()}))}},canShow:function(e,r,n){if(this._getFileObject(e,r)){if(!this._isDirectoryShare)return console.error("canShow() should not be called for regular user login-view."),void n(!1,null);var i=t.generateUrl("apps/files_photospheres")+"/sharefiles/xmpdata/"+this._sharingToken+"?filename="+encodeURIComponent(e)+"&path="+encodeURIComponent(this._getDirectorySharePathFromCurrentLocation());this._xmpDataBackendRequest(i,n)}else n(!1,null)},canShowSingleFileShare:function(e,r){var n=t.generateUrl("apps/files_photospheres")+"/sharefiles/xmpdata/"+e;this._xmpDataBackendRequest(n,r)}};window.photoSphereViewerFileAction=n}(jQuery,OC,OCA),jQuery((function(){var e=$("#sharingToken").val();if(!e)return console.log("Init regular user view"),void window.photoSphereViewerFileAction.init(!1,null,!1);var t=$.find(".files-filestable").length>0;if(t)console.log("Init directory share view"),window.photoSphereViewerFileAction.init(t,e,!1);else{var r=$("#mimetype").val(),n=$("#filename").val();r===window.photoSphereViewerFileAction._photoShpereMimeType&&(PhotosphereViewerFunctions.showLoader(!0),console.log("Init single file share view"),window.photoSphereViewerFileAction.init(!1,null,!0),$("#files-public-content").hide(),window.photoSphereViewerFileAction.canShowSingleFileShare(e,(function(t,r){if(t){var i=OC.generateUrl("/s/{token}/download",{token:e});window.photoSphereViewerFileAction.showFrame(i,n,r,"image")}else $("#files-public-content").show(),PhotosphereViewerFunctions.showLoader(!1)})))}}))})()})();
//# sourceMappingURL=fileAction.js.map?v=4a6e2c7f7a2c4a211694